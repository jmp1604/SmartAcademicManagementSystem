<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Category Management â€” CCS Faculty Requirement System</title>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Source+Sans+3:wght@400;500;600&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
    <link rel="stylesheet" href="../../shared/global.css"/>
    <link rel="stylesheet" href="../resc/css/faculty-specific.css"/>
    <link rel="stylesheet" href="../resc/css/admin-category-management.css"/>
</head>
<body>

<div id="header-container"></div>

<div id="sidebar-container"></div>

<main class="main-content">

    <div class="page-header anim anim-1">
        <h1>Category Management</h1>
        <p>Manage requirement categories for faculty submissions</p>
    </div>

    <div class="stat-cards anim anim-2">
        <div class="stat-card white">
            <div class="stat-label">Total Categories</div>
            <div class="stat-value" id="totalCategories">0</div>
        </div>
        <div class="stat-card green">
            <div class="stat-label">Active</div>
            <div class="stat-value" id="activeCategories">0</div>
        </div>
        <div class="stat-card gray">
            <div class="stat-label">Inactive</div>
            <div class="stat-value" id="inactiveCategories">0</div>
        </div>
        <div class="stat-card blue">
            <div class="stat-label">Total Files</div>
            <div class="stat-value" id="totalFiles">0</div>
        </div>
    </div>

    <div class="panel anim anim-3">
        <div class="toolbar">
            <div class="toolbar-title">
                <svg viewBox="0 0 24 24"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
                Requirement Categories
            </div>
            <div class="toolbar-right">
                <div class="search-box">
                    <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                    <input type="text" id="searchCategories" placeholder="Search categories..."/>
                </div>
                <select class="filter-select" id="statusFilter">
                    <option value="all">All Status</option>
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
                <button class="btn-primary-green" id="btnCreateCategory">
                    <svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                    Create New Category
                </button>
            </div>
        </div>

        <div id="categoriesGrid" class="categories-grid">
            <!-- Categories will be loaded here dynamically -->
        </div>

        <div id="emptyState" class="empty-state" style="display:none;">
            <svg viewBox="0 0 24 24"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
            <h3>No Categories Yet</h3>
            <p>Create your first category to start organizing faculty submissions</p>
        </div>
    </div>

</main>

<div id="categoryModal" class="modal-overlay" style="display:none;">
    <div class="modal-dialog">
        <div class="modal-header">
            <h3 id="modalTitle">Create New Category</h3>
            <button class="modal-close" onclick="closeCategoryModal()">
                <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <div class="modal-body">
            <form id="categoryForm">
                <input type="hidden" id="categoryId"/>
                
                <div class="form-group">
                    <label for="categoryName">Category Name <span class="required">*</span></label>
                    <input type="text" id="categoryName" class="form-control" placeholder="e.g., Syllabus, Grade Sheets" required/>
                </div>

                <div class="form-group">
                    <label for="categoryDescription">Description</label>
                    <textarea id="categoryDescription" class="form-control" rows="3" placeholder="Brief description of this category"></textarea>
                </div>

                <div class="form-group">
                    <label for="categoryIcon">Icon</label>
                    <input type="hidden" id="categoryIcon"/>
                    <div class="icon-picker-display" id="iconPickerDisplay">
                        <i class="fas fa-folder" id="selectedIconPreview"></i>
                        <span>Click to choose icon</span>
                    </div>
                    <div class="icon-picker-panel" id="iconPickerPanel" style="display:none;">
                        <div class="icon-picker-search">
                            <input type="text" id="iconSearch" placeholder="Search icons..." class="form-control"/>
                        </div>
                        <div class="icon-picker-grid" id="iconGrid">
                            <!-- Icons will be populated here -->
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="categoryStatus" value="active" checked/>
                            <span>Active</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="categoryStatus" value="inactive"/>
                            <span>Inactive</span>
                        </label>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn-secondary" onclick="closeCategoryModal()">Cancel</button>
            <button type="submit" form="categoryForm" class="btn-primary-green" id="btnSaveCategory">
                <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
                Save Category
            </button>
        </div>
    </div>
</div>

<div id="deleteModal" class="modal-overlay" style="display:none;">
    <div class="modal-dialog modal-small">
        <div class="modal-header">
            <h3>Delete Category</h3>
            <button class="modal-close" onclick="closeDeleteModal()">
                <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <div class="modal-body">
            <p id="deleteMessage">Are you sure you want to delete this category? This action cannot be undone.</p>
            <div class="warning-box">
                <svg viewBox="0 0 24 24"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                <span id="filesWarning"></span>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn-secondary" onclick="closeDeleteModal()">Cancel</button>
            <button type="button" class="btn-danger" id="btnConfirmDelete">
                <svg viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                Delete Category
            </button>
        </div>
    </div>
</div>

<button class="help-btn">?</button>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="../../config/.env.js"></script>
<script src="../../config/config.js"></script>
<script src="../../shared/global.js"></script>
<script src="../resc/js/faculty-specific.js"></script>
<script src="includes/sidebar.js"></script>
<script src="../resc/js/admin-category-management.js"></script>
<script>
    loadHeader();
    loadSidebar('admin-category-management');
</script>

</body>
</html>
